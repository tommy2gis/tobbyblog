function autosave_parse_response(n){var t=wpAjax.parseAjaxResponse(n,"autosave"),u="",r,i;return t&&t.responses&&t.responses.length&&(u=t.responses[0].data,t.responses[0].supplemental&&(i=t.responses[0].supplemental,"disable"==i.disable_autosave&&(autosave=function(){},autosaveLockRelease=!1,t={errors:!0}),i["active-post-lock"]&&jQuery("#active_post_lock").val(i["active-post-lock"]),i.alert&&(jQuery("#autosave-alert").remove(),jQuery("#titlediv").after('<div id="autosave-alert" class="error below-h2"><p>'+i.alert+"<\/p><\/div>")),jQuery.each(i,function(n,t){n.match(/^replace-/)&&jQuery("#"+n.replace("replace-","")).val(t)})),t.errors||(r=parseInt(t.responses[0].id,10),!isNaN(r)&&r>0&&autosave_update_slug(r))),u?jQuery(".autosave-message").html(u):autosaveOldMessage&&t&&jQuery(".autosave-message").html(autosaveOldMessage),t}function autosave_saved(n){blockSave=!1,autosave_parse_response(n),autosave_enable_buttons()}function autosave_saved_new(n){blockSave=!1;var t=autosave_parse_response(n),i;t&&t.responses.length&&!t.errors?(i=parseInt(t.responses[0].id,10),!isNaN(i)&&i>0&&(notSaved=!1,jQuery("#auto_draft").val("0")),autosave_enable_buttons(),autosaveDelayPreview&&(autosaveDelayPreview=!1,doPreview())):autosave_enable_buttons()}function autosave_update_slug(n){"undefined"!=makeSlugeditClickable&&jQuery.isFunction(makeSlugeditClickable)&&!jQuery("#edit-slug-box > *").size()&&jQuery.post(ajaxurl,{action:"sample-permalink",post_id:n,new_title:fullscreen&&fullscreen.settings.visible?jQuery("#wp-fullscreen-title").val():jQuery("#title").val(),samplepermalinknonce:jQuery("#samplepermalinknonce").val()},function(n){n!=="-1"&&(jQuery("#edit-slug-box").html(n),makeSlugeditClickable())})}function autosave_loading(){jQuery(".autosave-message").html(autosaveL10n.savingText)}function autosave_enable_buttons(){setTimeout(function(){jQuery(":button, :submit","#submitpost").removeAttr("disabled"),jQuery(".spinner","#submitpost").hide()},500)}function autosave_disable_buttons(){jQuery(":button, :submit","#submitpost").prop("disabled",!0),setTimeout(autosave_enable_buttons,5e3)}function delayed_autosave(){setTimeout(function(){blockSave||autosave()},200)}var autosave,autosaveLast="",autosavePeriodical,autosaveOldMessage="",autosaveDelayPreview=!1,notSaved=!0,blockSave=!1,fullscreen,autosaveLockRelease=!0;jQuery(document).ready(function(n){autosaveLast=(n("#post #title").val()||"")+(n("#post #content").val()||""),autosavePeriodical=n.schedule({time:autosaveL10n.autosaveInterval*1e3,func:function(){autosave()},repeat:!0,protect:!0}),n("#post").submit(function(){n.cancel(autosavePeriodical),autosaveLockRelease=!1}),n('input[type="submit"], a.submitdelete',"#submitpost").click(function(){blockSave=!0,window.onbeforeunload=null,n(":button, :submit","#submitpost").each(function(){var t=n(this);t.hasClass("button-primary")?t.addClass("button-primary-disabled"):t.addClass("button-disabled")}),n(this).attr("id")=="publish"?n("#major-publishing-actions .spinner").show():n("#minor-publishing .spinner").show()}),window.onbeforeunload=function(){var r=typeof tinymce!="undefined"?tinymce.activeEditor:!1,t,i;if(r&&!r.isHidden()){if(r.isDirty())return autosaveL10n.saveAlert}else if(fullscreen&&fullscreen.settings.visible?(t=n("#wp-fullscreen-title").val()||"",i=n("#wp_mce_fullscreen").val()||""):(t=n("#post #title").val()||"",i=n("#post #content").val()||""),(t||i)&&t+i!=autosaveLast)return autosaveL10n.saveAlert},n(window).unload(function(n){autosaveLockRelease&&n.target&&n.target.nodeName!="#document"}),n("#post-preview").click(function(){return n("#auto_draft").val()=="1"&&notSaved?(autosaveDelayPreview=!0,autosave(),!1):(doPreview(),!1)}),doPreview=function(){n("input#wp-preview").val("dopreview"),n("form#post").attr("target","wp-preview").submit().attr("target",""),n.browser.safari&&n("form#post").attr("action",function(n,t){return t+"?t="+(new Date).getTime()}),n("input#wp-preview").val("")};n("#title").on("keydown.editor-focus",function(t){var i;if(t.which==9&&!t.ctrlKey&&!t.altKey&&!t.shiftKey){if(typeof tinymce!="undefined"&&(i=tinymce.get("content")),i&&!i.isHidden())n(this).one("keyup",function(){n("#content_tbl td.mceToolbar > a").focus()});else n("#content").focus();t.preventDefault()}});"1"==n("#auto_draft").val()&&n("#title").blur(function(){this.value&&n("#auto_draft").val()=="1"&&delayed_autosave()})}),autosave=function(){blockSave=!0;var u=typeof tinymce!="undefined"&&tinymce.activeEditor&&!tinymce.activeEditor.isHidden(),n,t,i,f,r;autosave_disable_buttons(),n={action:"autosave",post_ID:jQuery("#post_ID").val()||0,autosavenonce:jQuery("#autosavenonce").val(),post_type:jQuery("#post_type").val()||"",autosave:1},jQuery(".tags-input").each(function(){n[this.name]=this.value}),t=!0,jQuery("#TB_window").css("display")=="block"&&(t=!1),u&&t&&(i=tinymce.activeEditor,i.plugins.spellchecker&&i.plugins.spellchecker.active?t=!1:(("mce_fullscreen"==i.id||"wp_mce_fullscreen"==i.id)&&tinymce.get("content").setContent(i.getContent({format:"raw"}),{format:"raw"}),tinymce.triggerSave())),fullscreen&&fullscreen.settings.visible?(n.post_title=jQuery("#wp-fullscreen-title").val()||"",n.content=jQuery("#wp_mce_fullscreen").val()||""):(n.post_title=jQuery("#title").val()||"",n.content=jQuery("#content").val()||""),jQuery("#post_name").val()&&(n.post_name=jQuery("#post_name").val()),(n.post_title.length==0&&n.content.length==0||n.post_title+n.content==autosaveLast)&&(t=!1),f=jQuery("#original_post_status").val(),goodcats=[],jQuery("[name='post_category[]']:checked").each(function(){goodcats.push(this.value)}),n.catslist=goodcats.join(","),jQuery("#comment_status").prop("checked")&&(n.comment_status="open"),jQuery("#ping_status").prop("checked")&&(n.ping_status="open"),jQuery("#excerpt").size()&&(n.excerpt=jQuery("#excerpt").val()),jQuery("#post_author").size()&&(n.post_author=jQuery("#post_author").val()),jQuery("#parent_id").val()&&(n.parent_id=jQuery("#parent_id").val()),n.user_ID=jQuery("#user-id").val(),jQuery("#auto_draft").val()=="1"&&(n.auto_draft="1"),t?(autosaveLast=n.post_title+n.content,jQuery(document).triggerHandler("wpcountwords",[n.content])):n.autosave=0,r=n.auto_draft=="1"?autosave_saved_new:autosave_saved,autosaveOldMessage=jQuery("#autosave").html(),jQuery.ajax({data:n,beforeSend:t?autosave_loading:null,type:"POST",url:ajaxurl,success:r})};
//@ sourceMappingURL=autosave.min.js.map